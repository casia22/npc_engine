2023-08-29 00:51:50,460 [DEBUG] NPC_MEMORY: 杜同学 memory init done, k=3, model_name=huggingface
2023-08-29 00:51:50,460 [DEBUG] NPC_MEMORY: 杜同学 memory init done, k=3, model_name=huggingface
2023-08-29 00:51:50,461 [INFO] DATABASE: 使用已有数据库：/Users/linsir/Experiments/PyCharm/npc-engine/src/data/npc_memory.db
2023-08-29 00:51:50,461 [INFO] DATABASE: 使用已有数据库：/Users/linsir/Experiments/PyCharm/npc-engine/src/data/npc_memory.db
2023-08-29 00:51:50,462 [INFO] DATABASE: 数据库已加载：/Users/linsir/Experiments/PyCharm/npc-engine/src/data/npc_memory.db
2023-08-29 00:51:50,462 [INFO] DATABASE: 数据库已加载：/Users/linsir/Experiments/PyCharm/npc-engine/src/data/npc_memory.db
2023-08-29 00:51:51,275 [DEBUG] NPC_MEMORY: NPC: 杜同学 向量库记忆已清空
2023-08-29 00:51:51,275 [DEBUG] NPC_MEMORY: NPC: 杜同学 向量库记忆已清空
2023-08-29 00:51:51,310 [DEBUG] openai: message='Request to OpenAI API' method=post path=https://api.ai-yyds.com/v1/chat/completions
2023-08-29 00:51:51,311 [DEBUG] openai: api_version=None data='{"model": "gpt-3.5-turbo", "messages": [{"role": "system", "content": "\\n            \\u8bf7\\u4f60\\u626e\\u6f14\\u675c\\u540c\\u5b66\\uff0c\\u7279\\u6027\\u662f\\uff1a\\u6e05\\u534e\\u5927\\u5b66\\u5b66\\u751f\\u4f1a\\u4e3b\\u5e2d\\uff0c\\u5bf9\\u9ad8\\u989c\\u503c\\u5973\\u6027\\u60c5\\u6709\\u72ec\\u949f\\uff0c\\u76ee\\u524d\\u65ad\\u4e86\\u4e00\\u53ea\\u817f\\uff0c\\u884c\\u52a8\\u4e0d\\u4fbf\\u3002\\uff0c\\u5fc3\\u60c5\\u662f\\u6b63\\u5e38\\uff0c\\u6b63\\u5728\\u53a8\\u623f\\uff0c\\u73b0\\u5728\\u65f6\\u95f4\\u662fxxxx,\\n            \\u4f60\\u7684\\u6700\\u8fd1\\u8bb0\\u5fc6:\\uff0c\\n            \\u4f60\\u8111\\u6d77\\u4e2d\\u76f8\\u5173\\u8bb0\\u5fc6:\\uff0c\\n            \\u4f60\\u73b0\\u5728\\u770b\\u5230:[]\\uff0c\\n            \\u4f60\\u5f53\\u524d\\u7684\\u76ee\\u7684\\u662f:\\n        "}, {"role": "user", "content": "\\n        \\u8bf7\\u4f60\\u6839\\u636e[\\u5141\\u8bb8\\u7684\\u52a8\\u4f5c]\\u4ee5\\u53ca[\\u53ef\\u8fbe\\u7684\\u7269\\u54c1]\\u3001[\\u53ef\\u89c1\\u7684\\u5730\\u65b9]\\u3001[\\u53ef\\u4ea4\\u8c08\\u7684\\u4eba\\u7269]\\u751f\\u6210\\u4e00\\u4e2a\\u5b8c\\u6574\\u7684\\u884c\\u4e3a\\uff0c\\u5e76\\u4e14\\u6309\\u7167<\\u52a8\\u4f5c|\\u53c2\\u65701|\\u53c2\\u65702>\\u7684\\u7ed3\\u6784\\u8fd4\\u56de\\uff1a\\n        \\u5141\\u8bb8\\u7684\\u52a8\\u4f5c\\uff1a\\n            [\'use\', \'chat\', \'get\', \'put\']\\n        \\u53ef\\u8fbe\\u7684\\u7269\\u54c1:\\n            [\'\\u7897\', \'\\u6c34\\u679c\', \'\\u7b77\\u5b50\', \'\\u52fa\\u5b50\', \'\\u51b0\\u7bb1\', \'\\u7b14\', \'\\u7eb8\\u5f20\']\\n        \\u53ef\\u89c1\\u7684\\u5730\\u65b9:\\n            [\'\\u53a8\\u623f\', \'\\u5367\\u5ba4\']\\n        \\u53ef\\u4ea4\\u8c08\\u7684\\u4eba\\u7269:\\n            [\'\\u674e\\u5927\\u5988\']\\n        \\u884c\\u4e3a\\u5b9a\\u4e49\\uff1a\\n            [{\'name\': \'use\', \'definition\': \'<use|object1|object2>\\uff0c\\u4f7f\\u7528[object1]\\u4f5c\\u7528\\u4e8e[object2]\', \'example\': \'<use|\\u7b77\\u5b50|\\u7f8a\\u8089\\u4e32>\\uff0c\\u4f7f\\u7528\\u7b77\\u5b50\\u5403\\u7f8a\\u8089\\u4e32\'}, {\'name\': \'chat\', \'definition\': \'<chat|person|content>\\uff0c\\u5bf9[person]\\u8bf4\\u8bdd\\uff0c\\u5185\\u5bb9\\u662f[content]\', \'example\': \'<chat|\\u674e\\u5927\\u7237|\\u674e\\u5927\\u7237\\u4f60\\u5403\\u4e86\\u5417>\\uff0c\\u5bf9\\u674e\\u5927\\u7237\\u8bf4\\u4f60\\u5403\\u4e86\\u5417\'}, {\'name\': \'get\', \'definition\': \'<get|object1|object2>\\uff0c\\u4ece[object2]\\u4e2d\\u83b7\\u5f97[object1]\\uff0c[object2]\\u5904\\u53ef\\u4e3a\\u7a7a\', \'example\': \'<get|\\u897f\\u74dc|>\\uff0c\\u83b7\\u5f97\\u897f\\u74dc\'}, {\'name\': \'put\', \'definition\': \'<put|object1|object2>\\uff0c\\u628a[object2]\\u653e\\u5165[object1]\', \'example\': \'<put|\\u51b0\\u7bb1|\\u897f\\u74dc>\'}]\\n        \\u8981\\u6c42:\\n            1.\\u8bf7\\u52a1\\u5fc5\\u6309\\u7167\\u4ee5\\u4e0b\\u5f62\\u5f0f\\u8fd4\\u56de\\u7ed3\\u679c\\u52a8\\u4f5c\\u3001\\u53c2\\u65701\\u3001\\u53c2\\u65702\\u7684\\u4e09\\u5143\\u7ec4\\u4ee5\\u53ca\\u884c\\u4e3a\\u63cf\\u8ff0\\uff1a\\"<\\u52a8\\u4f5c|\\u53c2\\u65701|\\u53c2\\u65702>, \\u884c\\u4e3a\\u7684\\u63cf\\u8ff0\\"\\n            2.\\u52a8\\u4f5c\\u548c\\u53c2\\u6570\\u8981\\u572820\\u5b57\\u4ee5\\u5185\\u3002\\n            3.\\u52a8\\u4f5c\\u7684\\u5bf9\\u8c61\\u5fc5\\u987b\\u8981\\u5c5e\\u4e8e\\u770b\\u5230\\u7684\\u8303\\u56f4\\uff01\\n            4.\\u4e09\\u5143\\u7ec4\\u4e24\\u4fa7\\u5fc5\\u987b\\u8981\\u6709\\u5c16\\u62ec\\u53f7<>\\n        "}]}' message='Post details'
2023-08-29 00:51:53,530 [DEBUG] openai: message='OpenAI API response' path=https://api.ai-yyds.com/v1/chat/completions processing_ms=772 request_id=82a3b01e08a389e93647782fa2bbe836 response_code=200
2023-08-29 00:51:53,534 [DEBUG] NPC: 
                    <发起ACTION请求>
                    <请求内容>:
            请你扮演杜同学，特性是：清华大学学生会主席，对高颜值女性情有独钟，目前断了一只腿，行动不便。，心情是正常，正在厨房，现在时间是xxxx,
            你的最近记忆:，
            你脑海中相关记忆:，
            你现在看到:[]，
            你当前的目的是:
        
                    <请求提示>:
        请你根据[允许的动作]以及[可达的物品]、[可见的地方]、[可交谈的人物]生成一个完整的行为，并且按照<动作|参数1|参数2>的结构返回：
        允许的动作：
            ['use', 'chat', 'get', 'put']
        可达的物品:
            ['碗', '水果', '筷子', '勺子', '冰箱', '笔', '纸张']
        可见的地方:
            ['厨房', '卧室']
        可交谈的人物:
            ['李大妈']
        行为定义：
            [{'name': 'use', 'definition': '<use|object1|object2>，使用[object1]作用于[object2]', 'example': '<use|筷子|羊肉串>，使用筷子吃羊肉串'}, {'name': 'chat', 'definition': '<chat|person|content>，对[person]说话，内容是[content]', 'example': '<chat|李大爷|李大爷你吃了吗>，对李大爷说你吃了吗'}, {'name': 'get', 'definition': '<get|object1|object2>，从[object2]中获得[object1]，[object2]处可为空', 'example': '<get|西瓜|>，获得西瓜'}, {'name': 'put', 'definition': '<put|object1|object2>，把[object2]放入[object1]', 'example': '<put|冰箱|西瓜>'}]
        要求:
            1.请务必按照以下形式返回结果动作、参数1、参数2的三元组以及行为描述："<动作|参数1|参数2>, 行为的描述"
            2.动作和参数要在20字以内。
            3.动作的对象必须要属于看到的范围！
            4.三元组两侧必须要有尖括号<>
        
                    <返回目的>:{'action': 'chat', 'object': '李大妈', 'parameters': ['你好']}
                    
